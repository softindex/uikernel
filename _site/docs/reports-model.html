<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <link rel='stylesheet' href='/static/bootstrap/css/bootstrap.min.css'/>
  <link rel='stylesheet' href='/static/font-awesome/css/font-awesome.min.css'/>
  <link rel='stylesheet' href='/static/css/pygment_trac.css'/>
  <link rel='stylesheet' href='/static/css/style.css'/>
  <script type='text/javascript' src='/static/js/jquery-2.1.4.min.js'></script>
  <script type='text/javascript' src='/static/bootstrap/js/bootstrap.min.js'></script>
  <title>Reports Model | UIKernel</title>
</head>
<body>
  <div class="page-row">
    <nav class="navbar-inverse home-menu">
      <div class="container-fluid container">
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="/">Home</a></li>
            <li class="active"><a href="/docs/getting-started.html">Docs</a></li>
            <li><a href="/examples/">Examples</a></li>
            <li><a href="/download.html">Download</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="http://datakernel.io">DataKernel</a></li>
            <li><a href="https://github.com/softindex/uikernel" target="_blank">Github</a></li>
          </ul>
        </div>
      </div>
    </nav>
    
  </div>
  <div class="page-row page-row-expanded">
    <div class="container content">
      <div class="row">
  <div class="col-sm-3 docs-menu">
    <!-- Docs Nav -->

<ul>
  <li><h3>Quick Start</h3></li>
  
  <li>
    <a href="/docs/getting-started.html">Getting Started</a>
    
  </li>
  
  <li>
    <a href="/docs/tutorial.html">Tutorial</a>
    
    <ul>
      
      <li>
        <a href="/docs/first-grid-component.html">First grid component</a>
      </li>
      
      <li>
        <a href="/docs/sorting-and-pagination.html">Sorting and pagination</a>
      </li>
      
      <li>
        <a href="/docs/applying-filters.html">Applying filters</a>
      </li>
      
      <li>
        <a href="/docs/editing-grid-data.html">Editing grid data</a>
      </li>
      
      <li>
        <a href="/docs/removing-records.html">Removing records</a>
      </li>
      
      <li>
        <a href="/docs/creating-records.html">Creating records</a>
      </li>
      
    </ul>
    
  </li>
  
</ul>
<hr />

<ul>
  <li><h3>Editors</h3></li>
  
  <li>
    <a href="/docs/editors.html">Overview</a>
    
  </li>
  
  <li>
    <a href="/docs/labels.html">Labels</a>
    
  </li>
  
  <li>
    <a href="/docs/list-model.html">List Model</a>
    
    <ul>
      
      <li>
        <a href="/docs/list-xhr-model.html">XHR Model</a>
      </li>
      
      <li>
        <a href="/docs/list-express-api.html">Express API</a>
      </li>
      
    </ul>
    
  </li>
  
</ul>
<hr />

<ul>
  <li><h3>Grid</h3></li>
  
  <li>
    <a href="/docs/grid-component.html">Component</a>
    
  </li>
  
  <li>
    <a href="/docs/grid-interface.html">Grid Model</a>
    
    <ul>
      
      <li>
        <a href="/docs/grid-model-xhr.html">Grid Xhr Model</a>
      </li>
      
      <li>
        <a href="/docs/grid-model-collection.html">Grid Model Collection</a>
      </li>
      
    </ul>
    
  </li>
  
  <li>
    <a href="/docs/validator.html">Validator</a>
    
  </li>
  
  <li>
    <a href="/docs/filter-adapter.html">Filters</a>
    
  </li>
  
  <li>
    <a href="/docs/grid-adapters.html">Form Adapters</a>
    
  </li>
  
  <li>
    <a href="/docs/express-grid-api.html">Express API</a>
    
  </li>
  
</ul>
<hr />

<ul>
  <li><h3>Form</h3></li>
  
  <li>
    <a href="/docs/form-mixin.html">Mixin</a>
    
  </li>
  
  <li>
    <a href="/docs/form-model.html">Model Interface</a>
    
    <ul>
      
      <li>
        <a href="/docs/form-xhr-model.html">XHR Model</a>
      </li>
      
    </ul>
    
  </li>
  
</ul>
<hr />

<ul>
  <li><h3>Reports</h3></li>
  
  <li>
    <a href="/docs/reports-mixin.html">Mixin</a>
    
  </li>
  
  <li class="active">
    <a href="/docs/reports-model.html">Model</a>
    
  </li>
  
  <li>
    <a href="/docs/reports-filters.html">Filters</a>
    
  </li>
  
</ul>
<hr />

<ul>
  <li><h3>Examples</h3></li>
  
  <li>
    <a href="/docs/dynamic-columns.html">Dynamic columns</a>
    
  </li>
  
  <li>
    <a href="/docs/bulk-operations.html">Bulk operations</a>
    
  </li>
  
  <li>
    <a href="/docs/form-example.html">Form</a>
    
  </li>
  
  <li>
    <a href="/docs/suggest-box.html">Suggest Box</a>
    
  </li>
  
  <li>
    <a href="/docs/reports-example.html">Reports</a>
    
  </li>
  
</ul>
<hr />


  </div>

  <div class="col-sm-9 docs-content">
    <h1>
      Reports Model
    </h1>
    <div class="subHeader"></div>

    <p>Model allows to retrieve data to display in OLAP cube.</p>

<h2 id="xhr-model">XHR Model</h2>

<p>There’s a client model implementation, that interacts with cube via API.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">model</span> <span class="o">=</span> <span class="nx">UIKernel</span><span class="p">.</span><span class="nx">createReportsXhrModel</span><span class="p">(</span><span class="nx">string</span> <span class="nx">apiUrl</span><span class="p">,</span> <span class="p">[</span><span class="nb">Object</span> <span class="nx">xhr</span><span class="p">]);</span></code></pre></div>

<h2 id="http-model">HTTP Model</h2>

<p>There’s a server model implementation, that interacts with remote cube server.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">model</span> <span class="o">=</span> <span class="nx">UIKernel</span><span class="p">.</span><span class="nx">createReportsHttpModel</span><span class="p">({</span>
  <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;localhost&#39;</span><span class="p">,</span>
  <span class="nx">port</span><span class="o">:</span> <span class="mi">80</span>
<span class="p">});</span></code></pre></div>

<h2 id="rest-api">REST API</h2>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>URL</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>GET</td>
      <td>/</td>
      <td>Read data from cube</td>
    </tr>
    <tr>
      <td>GET</td>
      <td>/info</td>
      <td>Retrieve information about what dimensions, mesuares and drillDowns are available to display</td>
    </tr>
    <tr>
      <td>GET</td>
      <td>/dimensions</td>
      <td>Get dimensions IDs, that can be values of the certain fitler</td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="model-interface">Model Interface</h2>

<h3 id="getdata">getData</h3>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">getData</span><span class="p">(</span><span class="nx">string</span><span class="p">[]</span> <span class="nx">dimensions</span><span class="p">,</span> <span class="nx">string</span><span class="p">[]</span> <span class="nx">measures</span><span class="p">,</span> <span class="nb">Object</span> <span class="nx">filters</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nb">Error</span> <span class="nx">err</span><span class="p">,</span> <span class="nb">Object</span><span class="p">[]</span> <span class="nx">data</span><span class="p">))</span></code></pre></div>

<p>Get requested data from cube.</p>

<hr />

<h3 id="getinfo">getInfo</h3>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">getInfo</span><span class="p">(</span><span class="nx">string</span><span class="p">[]</span> <span class="nx">dimensions</span><span class="p">,</span> <span class="nx">string</span><span class="p">[]</span> <span class="nx">measures</span><span class="p">,</span> <span class="nb">Object</span> <span class="nx">filters</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nb">Error</span> <span class="nx">err</span><span class="p">,</span> <span class="nb">Object</span> <span class="nx">info</span><span class="p">))</span></code></pre></div>

<p>Get requested information from cube.</p>

<p><strong>info:</strong></p>

<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Name</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>string[]</td>
      <td>drillDowns</td>
      <td>Available DrillDowns list</td>
    </tr>
    <tr>
      <td>string[]</td>
      <td>measures</td>
      <td>Available measures list</td>
    </tr>
  </tbody>
</table>

<hr />

<h3 id="getdimensions">getDimensions</h3>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">getDimensions</span><span class="p">(</span>
  <span class="nx">string</span> <span class="nx">dimension</span><span class="p">,</span>
  <span class="nx">string</span><span class="p">[]</span> <span class="nx">measures</span><span class="p">,</span>
  <span class="nb">Object</span> <span class="nx">filters</span><span class="p">,</span>
  <span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nb">Error</span> <span class="nx">err</span><span class="p">,</span> <span class="nb">Object</span><span class="p">[]</span> <span class="nx">dimensions</span><span class="p">)</span>
<span class="p">)</span></code></pre></div>

<p>Get the list of available values for the filter using certain dimension</p>

<hr />

<h2 id="replacing-id-in-result">Replacing ID in result</h2>

<p>To replace IDs with a names you need to declare reportsModel, that is going to call OLAP cube methods and replace IDs
with appropriate names. To replace IDs in breadcrumbs you need to return an addition parameter <code>names</code> in the
getInfo method, that stores string correspondences for every dimension.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">reportsModel</span><span class="p">.</span><span class="nx">getInfo</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">dimensions</span><span class="p">,</span> <span class="nx">measures</span><span class="p">,</span> <span class="nx">filters</span><span class="p">,</span> <span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">cube</span><span class="p">.</span><span class="nx">getInfo</span><span class="p">(</span><span class="nx">dimensions</span><span class="p">,</span> <span class="nx">measures</span><span class="p">,</span> <span class="nx">filters</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">info</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">info</span><span class="p">.</span><span class="nx">names</span> <span class="o">=</span> <span class="p">{};</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">filters</span><span class="p">.</span><span class="nx">userId</span><span class="p">)</span> <span class="p">{</span>
       <span class="nx">info</span><span class="p">.</span><span class="nx">names</span><span class="p">.</span><span class="nx">userId</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getUserName</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">filters</span><span class="p">.</span><span class="nx">userId</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">cb</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">info</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span></code></pre></div>

<blockquote>
  <p>User name is determined by a synchronous function call in this example. In most cases string name can be obtained
by only asynchronous calls. We recommend to use something like Promise, Generators or Async/Await for these purposes.</p>
</blockquote>


    <div class="docs-prevnext">
      
      <a class="docs-prev pull-left" href="/docs/reports-mixin.html">&larr; Prev</a>
      
      
      <a class="docs-next pull-right" href="/docs/reports-filters.html">Next &rarr;</a>
      
    </div>
  </div>
</div>

    </div>
  </div>
  <div class="page-row footer">
    
    <div class="home-copyright container">
      <div class="row">
        <div class="copyright col-sm-5">Copyright &copy; 2015 SoftIndex LLC. All Rights Reserved</div>
        <div class="col-sm-7">
          <div class="actions pull-right">
            <a href="/">Home</a>
            <a href="/docs/getting-started.html">Docs</a>
            <a href="/examples/">Examples</a>
            <a href="/download.html">Download</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
